
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Domain setup &#8212; Simple Navier-Stokes Solver 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script>window.MathJax = {"TeX": {"Macros": {"der": ["{\\frac{\\partial #1}{\\partial #2}}", 2], "dder": ["{\\frac{\\delta #1}{\\delta #2}}", 2], "mst": ["{\\gamma^{#1 #2}}", 2], "gx": ["{\\xi}"], "gy": ["{\\eta}"], "ux": ["{u_x}"], "uy": ["{u_y}"], "intrp": ["{\\overline{#1}^{#2}}", 2], "diffe": ["{\\delta_{#2} {#1}}", 2], "vat": ["{\\left. {#1} \\right|_{#2}}", 2], "ave": ["{\\left\\langle {#1} \\right\\rangle_{#2}}", 2], "pimm": ["i-1           "], "pim": ["i-\\frac{1}{2}"], "pic": ["i             "], "pip": ["i+\\frac{1}{2}"], "pipp": ["i+1           "], "pjmm": ["j-1           "], "pjm": ["j-\\frac{1}{2}"], "pjc": ["j             "], "pjp": ["j+\\frac{1}{2}"], "pjpp": ["j+1           "], "ximm": ["i-\\frac{1}{2}"], "xim": ["i             "], "xic": ["i+\\frac{1}{2}"], "xip": ["i+1           "], "xipp": ["i+\\frac{3}{2}"], "xjmm": ["j-1           "], "xjm": ["j-\\frac{1}{2}"], "xjc": ["j             "], "xjp": ["j+\\frac{1}{2}"], "xjpp": ["j+1           "], "yimm": ["i-1           "], "yim": ["i-\\frac{1}{2}"], "yic": ["i             "], "yip": ["i+\\frac{1}{2}"], "yipp": ["i+1           "], "yjmm": ["j-\\frac{1}{2}"], "yjm": ["j             "], "yjc": ["j+\\frac{1}{2}"], "yjp": ["j+1           "], "yjpp": ["j+\\frac{3}{2}"], "dintrpa": ["{\\overline{#1}^{#2}}", 2], "dintrpv": ["{\\widehat {#1}^{#2}}", 2], "dintrpu": ["{\\widetilde {#1}^{#2}}", 2]}}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Discrete governing equations" href="discrete_governing_equations/index.html" />
    <link rel="prev" title="Spatial discretisation" href="index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Simple Navier-Stokes Solver</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=NaokiHori&repo=SimpleNavierStokesSolver&type=true&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../governing_equations/index.html">Governing equations</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Numerical method</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../temporal_discretisation/index.html">Temporal discretisation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Spatial discretisation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../implementation/index.html">Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references.html">References</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Numerical method</a><ul>
  <li><a href="index.html">Spatial discretisation</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Spatial discretisation</a></li>
      <li>Next: <a href="discrete_governing_equations/index.html" title="next chapter">Discrete governing equations</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="domain-setup">
<span id="domain"></span><h1>Domain setup<a class="headerlink" href="#domain-setup" title="Permalink to this heading">Â¶</a></h1>
<p>In this project, we employ the staggered grid arrangement, i.e., pressure (and temperature), <span class="math notranslate nohighlight">\(x\)</span> velocity, and <span class="math notranslate nohighlight">\(y\)</span> velocity are defined at different locations:</p>
<a class="reference internal image-reference" href="../../_images/staggered1.pdf"><img alt="../../_images/staggered1.pdf" src="../../_images/staggered1.pdf" style="width: 800px;" /></a>
<p>where the left figure shows the locations and indices of the variables which are used in equations, while the variables in the right figure are used in the code.</p>
<p>In the current project, we assume that the domain is wall-bounded in <span class="math notranslate nohighlight">\(x\)</span> direction, while periodic boundary conditions are imposed in <span class="math notranslate nohighlight">\(y\)</span> direction.
Regarding the cell center (locations where the pressure is positioned), the number of grid points in <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span> directions are <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">itot</span><span class="w"></span></code> and <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">jtot</span><span class="w"></span></code>, respectively.</p>
<p>In <span class="math notranslate nohighlight">\(y\)</span> direction, the domain is split into <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">mpisize</span><span class="w"></span></code> (the number of processors) smaller domains using MPI, and each domain has <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">jsize</span><span class="w"></span></code> cell centers:</p>
<a class="reference internal image-reference" href="../../_images/domain.pdf"><img alt="../../_images/domain.pdf" src="../../_images/domain.pdf" style="width: 800px;" /></a>
<p>Note that <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">jsize</span><span class="w"></span></code> can be different for each process.
For more details, see <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">parallel_get_size</span><span class="w"></span></code> in <a class="reference internal" href="../../implementation/parallel/others.html#parallel-others"><span class="std std-ref">src/parallel/others.c</span></a>.</p>
<p>In addition, in order to evaluate the differentiations in <span class="math notranslate nohighlight">\(y\)</span> direction close to the domain edges, additional cells (halo cells) are necessary to be appended in <span class="math notranslate nohighlight">\(y\)</span> boundaries.</p>
<p>Thus, the locations of <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">UX</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"></span></code> are</p>
<a class="reference internal image-reference" href="../../_images/staggered2.pdf"><img alt="../../_images/staggered2.pdf" src="../../_images/staggered2.pdf" style="width: 600px;" /></a>
<p>and the locations of <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">UY</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"></span></code> leads</p>
<a class="reference internal image-reference" href="../../_images/staggered3.pdf"><img alt="../../_images/staggered3.pdf" src="../../_images/staggered3.pdf" style="width: 600px;" /></a>
<p>and the locations of <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">P</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"></span></code> (and <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">TEMP</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"></span></code>) can be drawn as</p>
<a class="reference internal image-reference" href="../../_images/staggered4.pdf"><img alt="../../_images/staggered4.pdf" src="../../_images/staggered4.pdf" style="width: 600px;" /></a>
<p>The size of these two-dimensional arrays are</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p><code class="code highlight c-lang c docutils literal highlight-c"><span class="n">i</span><span class="w"></span></code> range</p></th>
<th class="head"><p><code class="code highlight c-lang c docutils literal highlight-c"><span class="n">j</span><span class="w"></span></code> range</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="code highlight c-lang c docutils literal highlight-c"><span class="n">UX</span><span class="w"></span></code></p></td>
<td><p><code class="code highlight c-lang c docutils literal highlight-c"><span class="mi">1</span><span class="o">:</span><span class="n">itot</span><span class="o">+</span><span class="mi">1</span><span class="w"></span></code></p></td>
<td><p><code class="code highlight c-lang c docutils literal highlight-c"><span class="mi">0</span><span class="o">:</span><span class="n">jsize</span><span class="o">+</span><span class="mi">1</span><span class="w"></span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="code highlight c-lang c docutils literal highlight-c"><span class="n">UY</span><span class="w"></span></code></p></td>
<td><p><code class="code highlight c-lang c docutils literal highlight-c"><span class="mi">0</span><span class="o">:</span><span class="n">itot</span><span class="o">+</span><span class="mi">1</span><span class="w"></span></code></p></td>
<td><p><code class="code highlight c-lang c docutils literal highlight-c"><span class="mi">0</span><span class="o">:</span><span class="n">jsize</span><span class="o">+</span><span class="mi">1</span><span class="w"></span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="code highlight c-lang c docutils literal highlight-c"><span class="n">P</span><span class="w"></span></code>, <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">TEMP</span><span class="w"></span></code></p></td>
<td><p><code class="code highlight c-lang c docutils literal highlight-c"><span class="mi">0</span><span class="o">:</span><span class="n">itot</span><span class="o">+</span><span class="mi">1</span><span class="w"></span></code></p></td>
<td><p><code class="code highlight c-lang c docutils literal highlight-c"><span class="mi">0</span><span class="o">:</span><span class="n">jsize</span><span class="o">+</span><span class="mi">1</span><span class="w"></span></code></p></td>
</tr>
</tbody>
</table>
<p>Note that <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">UY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"></span></code>, <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">UY</span><span class="p">(</span><span class="n">itot</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"></span></code> are shifted towards the near wall locations so that we can impose the velocity boundary conditions directly.
A similar treatment is considered for the pressure.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Another way is to position cells inside the walls, whose values are extrapolated (ghost cells).
When computing the derivatives, however, the current implementation and the way to use ghost cells give identical results.</p>
</div>
<p>In <span class="math notranslate nohighlight">\(y\)</span> direction, the grid spacing should be equidistant for now.
In <span class="math notranslate nohighlight">\(x\)</span> direction, on the other hand, non-uniform grid arrangement can be adopted, which could be beneficial to resolve boundary layers on the walls by clustering grid points.
To identify the position of the computational nodes, it is necessary to use two variables which are in <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">param</span><span class="w"></span></code> structure, whose definitions are described below.</p>
<ol class="arabic">
<li><p><code class="code highlight c-lang c docutils literal highlight-c"><span class="n">param</span><span class="o">-&gt;</span><span class="n">xf</span><span class="w"></span></code></p>
<p><code class="code highlight c-lang c docutils literal highlight-c"><span class="n">XF</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"></span></code> is used to describe the position of the cell faces in <span class="math notranslate nohighlight">\(x\)</span> direction (<strong>f</strong> comes from face), i.e., the locations where <span class="math notranslate nohighlight">\(\ux\)</span> is defined:</p>
<a class="reference internal image-reference" href="../../_images/grid11.pdf"><img alt="../../_images/grid11.pdf" src="../../_images/grid11.pdf" style="width: 800px;" /></a>
</li>
<li><p><code class="code highlight c-lang c docutils literal highlight-c"><span class="n">param</span><span class="o">-&gt;</span><span class="n">xc</span><span class="w"></span></code></p>
<p><code class="code highlight c-lang c docutils literal highlight-c"><span class="n">XC</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"></span></code> is used to describe the position of the cell centers in <span class="math notranslate nohighlight">\(x\)</span> direction (<strong>c</strong> comes from center), i.e., the locations where pressure, temperature, and <span class="math notranslate nohighlight">\(\uy\)</span> are defined:</p>
<a class="reference internal image-reference" href="../../_images/grid21.pdf"><img alt="../../_images/grid21.pdf" src="../../_images/grid21.pdf" style="width: 800px;" /></a>
</li>
</ol>
<p>Note that cell-face positions are included at the edges of the domain.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Coordiates are numerically defined by <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">set_coordinate</span><span class="w"></span></code> in <a class="reference internal" href="../../implementation/param/init.html#param-init"><span class="std std-ref">src/param/init.c</span></a>.</p>
</div>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2022, Naoki Hori.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/numerical_method/spatial_discretisation/domain.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>