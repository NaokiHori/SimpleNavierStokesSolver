
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Introduction &#8212; Simple Navier-Stokes Solver 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script>window.MathJax = {"TeX": {"Macros": {"der": ["{\\frac{\\partial #1}{\\partial #2}}", 2], "dder": ["{\\frac{\\delta #1}{\\delta #2}}", 2], "mst": ["{\\gamma^{#1 #2}}", 2], "gx": ["{\\xi}"], "gy": ["{\\eta}"], "ux": ["{u_x}"], "uy": ["{u_y}"], "intrp": ["{\\overline{#1}^{#2}}", 2], "diffe": ["{\\delta_{#2} {#1}}", 2], "vat": ["{\\left. {#1} \\right|_{#2}}", 2], "ave": ["{\\left\\langle {#1} \\right\\rangle_{#2}}", 2], "pimm": ["i-1           "], "pim": ["i-\\frac{1}{2}"], "pic": ["i             "], "pip": ["i+\\frac{1}{2}"], "pipp": ["i+1           "], "pjmm": ["j-1           "], "pjm": ["j-\\frac{1}{2}"], "pjc": ["j             "], "pjp": ["j+\\frac{1}{2}"], "pjpp": ["j+1           "], "ximm": ["i-\\frac{1}{2}"], "xim": ["i             "], "xic": ["i+\\frac{1}{2}"], "xip": ["i+1           "], "xipp": ["i+\\frac{3}{2}"], "xjmm": ["j-1           "], "xjm": ["j-\\frac{1}{2}"], "xjc": ["j             "], "xjp": ["j+\\frac{1}{2}"], "xjpp": ["j+1           "], "yimm": ["i-1           "], "yim": ["i-\\frac{1}{2}"], "yic": ["i             "], "yip": ["i+\\frac{1}{2}"], "yipp": ["i+1           "], "yjmm": ["j-\\frac{1}{2}"], "yjm": ["j             "], "yjc": ["j+\\frac{1}{2}"], "yjp": ["j+1           "], "yjpp": ["j+\\frac{3}{2}"], "dintrpa": ["{\\overline{#1}^{#2}}", 2], "dintrpv": ["{\\widehat {#1}^{#2}}", 2], "dintrpu": ["{\\widetilde {#1}^{#2}}", 2]}}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Governing equations" href="governing_equations/index.html" />
    <link rel="prev" title="Documentation" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Simple Navier-Stokes Solver</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=NaokiHori&repo=SimpleNavierStokesSolver&type=true&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="governing_equations/index.html">Governing equations</a></li>
<li class="toctree-l1"><a class="reference internal" href="numerical_method/index.html">Numerical method</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementation/index.html">Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Documentation</a></li>
      <li>Next: <a href="governing_equations/index.html" title="next chapter">Governing equations</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>There are mainly three reasons why I develop this library.</p>
<ol class="arabic">
<li><p>Connections between methods and implementations</p>
<p>Although there are so many elegant libraries in the world, not all have documentations, and few are well-documented.
In particular, sometimes there is a huge discrepancy between methods (equations) and implementations (code).
I aim to find a way to reduce this gap in this project.</p>
</li>
<li><p>Well-validated</p>
<p>Although validations of codes are usually shown in publications, it is not easy to see it is <em>really</em> working, and in the first place compilation of the code itself can be cumbersome.
Trying to validate the code and publishing the results automatically whenever changes are made is another objective of this project.</p>
</li>
<li><p>Shedding light on minor but non-trivial things</p>
<p>Although the background algorithm of this solver (integrating mass, momentum, and scalar fields) is fairly simple and famous, minor things are less focused and sometimes correct ways are counter-intuitive.
Shedding light on these minor but non-trivial things, such as</p>
<ul class="simple">
<li><p>discrete energy conservation</p></li>
<li><p>calculation of dissipation rates</p></li>
<li><p>Nusselt number agreements</p></li>
</ul>
<p>is the third focus of this project.</p>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although the program is parallelised using MPI, the efficiency of the code is not considered so much.
For instance, memory allocations and deallocations are frequently called to shrink the scopes of the variables.
Therefore it is less efficient and not recommended to perform any large-scale simulations.</p>
</div>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h2>
<section id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>C compiler</p></li>
<li><p>MPI</p></li>
<li><p>FFTW3</p></li>
</ul>
</section>
<section id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h3>
<p>I recommend to use <a class="reference external" href="https://www.docker.com">Docker</a> and <a class="reference external" href="https://git-scm.com">Git</a>, so that users do not contaminate their local environments.</p>
<ol class="arabic">
<li><p>Prepare working place and visit</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mkdir /path/to/your/working/directory
<span class="gp">$ </span><span class="nb">cd</span>    /path/to/your/working/directory
</pre></div>
</div>
</li>
<li><p>Fetch sources etc.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git clone https://github.com/NaokiHori/SimpleNavierStokesSolver
<span class="gp">$ </span><span class="nb">cd</span> SimpleNavierStokesSolver
</pre></div>
</div>
</li>
<li><p>Build Docker image and launch container</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker build -t simplenavierstokessolver:latest .
<span class="gp">$ </span>docker run -it --rm --cpuset-cpus<span class="o">=</span><span class="s2">&quot;0-1&quot;</span> -u runner -v <span class="si">${</span><span class="nv">PWD</span><span class="si">}</span>:/home/runner simplenavierstokessolver:latest
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Change “0-1” depending on your CPU resource</p>
</div>
</li>
<li><p>Prepare place for saving results and build solver</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make output
<span class="gp">$ </span>make
</pre></div>
</div>
</li>
<li><p>Run</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mpirun -n <span class="m">2</span> ./a.out
</pre></div>
</div>
</li>
</ol>
<p>Parameters are given by default for introductory purpose, which can be changed by giving environmental variables.
For instance, specifying</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">ly</span><span class="o">=</span><span class="m">4</span>. <span class="nv">jtot</span><span class="o">=</span><span class="m">512</span> mpirun -n <span class="m">2</span> ./a.out
</pre></div>
</div>
<p>changes the domain size in <span class="math notranslate nohighlight">\(y\)</span> direction (original <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">ly</span><span class="o">=</span><span class="mf">2.</span><span class="w"></span></code> and <code class="code highlight c-lang c docutils literal highlight-c"><span class="n">jtot</span><span class="o">=</span><span class="mi">256</span><span class="w"></span></code>, see <a class="reference internal" href="implementation/param/init.html#param-init"><span class="std std-ref">src/param/init.c</span></a>).</p>
<p>Note that this is equivalent to prepare a script (e.g., <code class="docutils literal notranslate"><span class="pre">exec.sh</span></code>):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nb">export</span> <span class="nv">ly</span><span class="o">=</span><span class="m">4</span>.
<span class="nb">export</span> <span class="nv">jtot</span><span class="o">=</span><span class="m">64</span>

mpirun -n <span class="m">2</span> ./a.out
</pre></div>
</div>
<p>and call it:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>bash exec.sh
</pre></div>
</div>
<p>Please refer to <a class="reference external" href="https://github.com/NaokiHori/SimpleNavierStokesSolver/blob/main/exec.sh">exec.sh</a> and also check <a class="reference internal" href="implementation/param/index.html#param"><span class="std std-ref">param/</span></a> for all available options.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2022, Naoki Hori.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/introduction.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>